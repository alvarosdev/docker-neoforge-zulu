services:
  minecraft:
    container_name: "neoforgeserver"
    # image: ghcr.io/alvarosdev/zulu-fabricmc:latest
    # Uncomment below to build locally instead of using the image
    build:
      dockerfile: ./Dockerfile
      context: ./
    restart: unless-stopped
    environment:
      MEMORYSIZE: "2G"
      PUID: ""
      PGID: ""
      # RCON settings for healthcheck (optional, set in server.properties)
      # RCON_PASSWORD: "minecraft"
    volumes:
      - ./neoforge/mods:/data/mods:rw
      - ./neoforge/world:/data/world:rw
      - ./neoforge/config:/data/config:rw
    ports:
      - "25565:25565"
    stdin_open: true
    tty: true
    # Healthcheck requires RCON to be enabled in server.properties
    # healthcheck:
    #   test: ["CMD", "rcon-cli", "--host", "localhost", "--port", "25575", "--password", "minecraft", "ping"]
    #   interval: 60s
    #   timeout: 10s
    #   start_period: 120s
    #   retries: 3
